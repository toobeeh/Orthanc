<!doctype html>
<html>
<head>
    <!-- pls DONT read this, its A MESS -->
    <meta charset="utf-8">
    <title>Typo Admin</title>
    <script>
        let base = "";
        switch (window.location.host) {
            case "tobeh.host":
                base = "https://tobeh.host/Orthanc/";
                break;
            case "typo.rip":
                base = "https://typo.rip/";
                break;
        }
        document.writeln('<base href="' + base + '" />');
    </script>
    <link rel="stylesheet" type="text/css" href="popup.css">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <style>
        body{
            min-height: 100%;
            width:calc(100% - 20px);
        }

        .info{
            font-size:1.5em;
            /* font-weight:600; */
            padding:2em;
        }

        .prevContainer > div{
            margin:2em;
            width:250px;
            border: 2px solid #7289da;
            border-radius:6px;
        }
        .prevContainer{
            display:flex;
            flex-wrap:wrap;
            align-items: center;
            justify-content: space-around;
        }
        .flexcenter{
            justify-content: center;
        }


        .img{
            max-height:18em; width: auto; margin:1em;object-fit:contain;
        }
        .label{margin:1em;}
        body > h1{
            padding:0;
        }

    </style>
</head>
<body>
    <h1>
        <a href="https://tobeh.host/typo/"><button type="button" class="skribbl" id="">Add Typo</button></a>
        <button type="button" class="skribbl" id="manual">Manual</button>
        <button type="button" class="skribbl active" id="admin">Admin</button>
        <button type="button" class="skribbl" id="github">GitHub</button>
    </h1>
    <br>
    <div class="flexcenter flexrow">
        <button type="button" class="skribbl active" id="setup">Set up the bot</button>
        <button type="button" class="skribbl" id="config">Configure the bot</button>
    </div>
    <div class="prevContainer flexcol" id="manualSetup">
        <div class="flexcol" style="width:auto" >
            <h1>Invite & setup the bot</h1>
            <div class="flexrow">
                <div class="flexcol">
                    <button type="button" class="skribbl active" id="invite">Invite the bot here.</button>
                    <div class="label">Invite Palantir and choose your server. 
                        <br>
                        Make sure to grant the bot a role with 'read message history', 'write messages' and 'use external emojis' permissions in the channels you plan to use it.<br>
                        The bot will modify a single message repeatedly, so make sure to have  a channel where the message stays on top.<br><br>
                        Finally, initialize the bot with the command '>observe #channel'.<br>
                        If the prefix > is already used, you can call commands also by mentioning the bot, like '@Palantir observe #channel'.
                    </div>
                </div>
                <div class="flexcol">
                    <img src='bot/d3.png' style='height:auto;width:100%'>
                    <br>
                </div>
            </div>
        </div>
       
        <div class="flexcol" style="width:auto" >
            <h1>Basic troubleshoot</h1>
            <div class="flexcol">
                <div class="">
                    <div class="label back">Which commands are usable?</div>
                    <div class="label">
                        Get available commands with '>help'.<br>
                        Only commands which can be executed by the author are shown.<br>
                        Every command to change bot settings requires the administrator role permission.
                    </div>
                   
                </div>
                <br>
                <div class="">
                    <div class="label back">What is the server token?</div>
                    <div class="label">
                        The server token is a unique key which lets users see and send lobbies to this server.<br>
                        This ensures that the lobbies are only visible to users in the server.<br>
                        If the token is changed, users need to enter the new token to be verified again.
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">How to change the channel?</div>
                    <div class="label">
                        The channel can always be set with the command '>observe #channel'<br>
                        If existing, the current bot message will be left as it is and a new one will be created.<br>
                        By default, the server token will change. <br>
                        If you want to keep the token as it is, call the command '>switch #channel'.
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">The bot does not edit the message.</div>
                    <div class="label">
                        Try to set the channel again.<br>
                        If this does not help, contact me on discord on tobeh#7437.
                    </div>
                </div>
                <br>
                
            </div>
        </div>
    </div>
    <div class="prevContainer flexcol" style="display:none" id="manualConfig">
        <div class="flexcol" style="width:auto" >
            <h1>Commands documentation</h1>
            <div class="flexcol">
                <div class="">
                    <div class="label back">>manual</div>
                    <div class="label">
                        Usable by anyone plus in DM.<br>
                        Takes no arguments.<br>
                        Responds a message with a manual text how to connect the bot with the extension.<br>
                        Example: >manual
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>help</div>
                    <div class="label">
                        Usable by anyone plus in DM.<br>
                        The first thing you should do when you're confused with a command! <br>
                        Optionally takes a command name as argument for further details.<br>
                        Responds a message with details about all comands or the specified command.<br>
                        Example: >help observe
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>observe</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes the target channel name as argument.<br>
                        Sets the channel for the bot message and initiates the bot.<br>
                        Generates a new server token - server member have to enter this in order to use the bot.<br>
                        Example: >observe #channel
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>addwebhook</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Adds a webhook to a server.<br>
                        Webhooks enable users to post images to a dicord server by clicking the letter-icon in skribbl.<br>
                        Multiple webhooks for different channels can be added.<br>
                        Takes the name (can be any) and the webhook url as parameter.<br>
                        Get the URL by creating a webhook for a channel in discord and click "Copy Webhook URL". <br>
                        Example: >addwebhook ImagePoster https://discordapp.com/api/webhooks/xx/xx
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>webhooks</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Lists all webhooks for your server.<br>
                        Takes an optional argument to remove ALL webhooks for your server.<br>
                        Example: >webhooks <br>>
                        Example: >webhooks true
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>switch</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes the target channel name as argument.<br>
                        Changes the channel for the bot message.<br>
                        Does't generate a new login token; users dont have to add the server again.<br>
                        Example: >switch #other-channel
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>header</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Enter the header text after the command name as argument.<br>
                        Sets the headline of the bot message. It can contain formatting like code blocks or emojis.<br>
                        Example: >header ***Nice header***
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>idle</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Enter the idle text after the command name as argument.<br>
                        Sets the idle status message of the bot message when no lobbies are active. Same formatting applies as for header.<br>
                        Example: >idle *No lobbies atm*
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>token</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes 'on' or 'off' as argument.<br>
                        Sets whether the server token should be displayed in the bot message.<br>
                        Example: >token off
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>refreshed</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes 'on' or 'off' as argument.<br>
                        Sets whether it should be shown when the message was last edited. Useful if the bot should lag somehow.<br>
                        Example: >refreshed on
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>timezone</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes an integer as argument.<br>
                        Sets the timezone for the refreshed status. The argument represents the UTC offset.<br>
                        Example: >timezone -2
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>animated</div>
                    <div class="label">
                        Usable by roles with administrator permission and server-only.<br>
                        Takes 'on' or 'off' as argument.<br>
                        Sets whether the random animated emojis should be displayed in the lobbies listing. 'on' is recommended ;)<br>
                        Example: >animated on
                    </div>
                </div>
                <br>
                <div class="">
                    <div class="label back">>login</div>
                    <div class="label">
                        Usable by anyone ONLY in DM.<br>
                        No arguments.<br>
                        Generates a login for a new user or sends a existing login.<br>
                        Example: >login
                    </div>
                </div>
                <br>
            </div>
        </div>
    </div>
    <script>

        document.querySelectorAll("button, input[type='range']").forEach((o)=>{
            o.addEventListener("click", setInfo);
            o.addEventListener("input", setInfo);
        });

        function setInfo(e){
            let info = document.querySelector(".info");
            
            if(this.id == 'github'){
                window.location.href = 'https://github.com/toobeeh/';
            }
            if(this.id == 'invite'){
                window.location.href = 'https://discord.com/oauth2/authorize?client_id=715874397025468417&scope=bot&permissions=329728';
            }
            if(this.id == 'manual'){
                window.location.href = '/';
            }
            if(this.id == 'store'){
                window.location.href = 'https://chrome.google.com/webstore/detail/skribbl-typo/bpcilmjlpebjklinlbdjhfkkgmmfghfj';
            }
            if(this.id == 'setup'){
                document.querySelector("#setup").classList.toggle("active");
                document.querySelector("#config").classList.toggle("active");
                document.querySelector("#manualSetup").style.display="flex";
                document.querySelector("#manualConfig").style.display="none";
            }
            if(this.id == 'config'){
                document.querySelector("#setup").classList.toggle("active");
                document.querySelector("#config").classList.toggle("active");
                document.querySelector("#manualSetup").style.display="none";
                document.querySelector("#manualConfig").style.display="flex";
            }
        }

    </script>
</body>
</html>
